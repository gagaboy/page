<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link href="/page/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/page/lib/bootstrap/font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="/page/lib/bootstrap/css/animate.css" rel="stylesheet">
    <link href="/page/lib/bootstrap/css/style.css" rel="stylesheet">
    <link href="/page/src/css/page.css" rel="stylesheet">
</head>
<body>
<br>

<div id="container">

</div>

<div>
    <button id="loadData">加载数据</button>
    <button id="submitData">提交数据</button>
</div>

<div id="valArea">

</div>

<script src="/page/bower_components/mootools/Source/Core/Core.js"></script>
<script src="/page/bower_components/mootools/Source/Types/Array.js"></script>
<script src="/page/bower_components/mootools/Source/Types/String.js"></script>
<script src="/page/bower_components/mootools/Source/Types/Object.js"></script>
<script src="/page/bower_components/mootools/Source/Types/Number.js"></script>
<script src="/page/bower_components/mootools/Source/Types/Function.js"></script>
<script src="/page/bower_components/mootools/Source/Class/Class.js"></script>
<script src="/page/bower_components/mootools/Source/Class/Class.Extras.js"></script>
<script src="/page/thirdpart/products-WB0R5L90S/Static_Full_Version/js/jquery-2.1.1.js"></script>
<script src="/page/thirdpart/products-WB0R5L90S/Static_Full_Version/js/bootstrap.js"></script>

<script src="/page/bower_components/avalon/avalon.js"></script>
<script>

    require(["../../../page/src/Bootstrap"], function () {
        //console.log(inq);
        var form = Page.create("form", {
            $id: 'f',
            $parentId: 'container',
            cols: 2,
            dataSources: {
                ds1: {
                    type: 'dataValue',
                    options: {
                        fetchUrl: 'demo.json',
                        syncUrl:''
                    }
                }
            },
            widgets: [
                {$id: 'name', $xtype: 'input', label: '您的姓名', bind: 'ds1.xm'},
                {$id: 'interest', $xtype: 'input', label: '兴趣', bind: 'ds1.xq'},
                {$id: 'sex', $xtype: 'input', label: '性别', bind: 'ds1.xb'},
                {$id: 'phone', $xtype: 'input', label: '电话', bind: 'ds1.dh'},
                {$id: 'grjj', $xtype: 'input', label: '个人简介', bind: "ds1.grjj"},
                {$id: 'xy', $xtype: 'combobox', url: "../form/combobox/Data.demo.json", label: '学院', bind: "ds1.xy"}
            ]
        });
        form.render();

        Page.manager.components["ds1"].addEvent("recordUpdated", function (v) {
            $("#valArea").html(JSON.stringify(v));
        });


        var ds1 =  Page.manager.components["ds1"];
        ds1.sync();
        $("#loadData").click(function () {
            Promise.all([ds1.fetch()]).then(function(){
                ds1.updateRecord(ds1.getValue());
            });
        });
        $("#submitData").click(function () {
            form.submitForm();
        });
    });
</script>
</body>
</html>