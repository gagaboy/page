<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link href="/page/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/page/lib/bootstrap/font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="/page/lib/bootstrap/css/animate.css" rel="stylesheet">
    <link href="/page/lib/bootstrap/css/style.css" rel="stylesheet">
    <link href="/page/src/css/page.css" rel="stylesheet">
    <link href="/page/lib/bootstrap/css/plugins/iCheck/custom.css" rel="stylesheet">
    <link href="/page/lib/bootstrap/css/plugins/iCheck/green.png" rel="stylesheet">
    <link href="/page/lib/bootstrap/css/plugins/iCheck/green@2x.png" rel="stylesheet">

    <!-- Data Tables -->
    <link href="/page/thirdpart/products-WB0R5L90S/Static_Full_Version/css/plugins/dataTables/dataTables.bootstrap.css" rel="stylesheet">
    <link href="/page/thirdpart/products-WB0R5L90S/Static_Full_Version/css/plugins/dataTables/dataTables.responsive.css" rel="stylesheet">
    <link href="/page/thirdpart/products-WB0R5L90S/Static_Full_Version/css/plugins/dataTables/dataTables.tableTools.min.css" rel="stylesheet">
</head>
<body>
<br>

<div id="container">

</div>
<div id="container2">

</div>

<div>
    <button id="loadData">加载数据</button>
    <button id="submitData">提交数据</button>
</div>

<div id="valArea">

</div>

<script src="/page/bower_components/mootools/Source/Core/Core.js"></script>
<script src="/page/bower_components/mootools/Source/Types/Array.js"></script>
<script src="/page/bower_components/mootools/Source/Types/String.js"></script>
<script src="/page/bower_components/mootools/Source/Types/Object.js"></script>
<script src="/page/bower_components/mootools/Source/Types/Number.js"></script>
<script src="/page/bower_components/mootools/Source/Types/Function.js"></script>
<script src="/page/bower_components/mootools/Source/Class/Class.js"></script>
<script src="/page/bower_components/mootools/Source/Class/Class.Extras.js"></script>
<script src="/page/thirdpart/products-WB0R5L90S/Static_Full_Version/js/jquery-2.1.1.js"></script>
<script src="/page/thirdpart/products-WB0R5L90S/Static_Full_Version/js/bootstrap.js"></script>

<script src="/page/bower_components/avalon/avalon.js"></script>
<script>

    require(["../../../page/src/Bootstrap"], function () {
        //console.log(inq);
        var ds = Page.create("dataValue", {
            $id: 'ds1',
            fetchUrl: 'demo.json',
            syncUrl: '',
            data: {
                xm: ''
            }
        });
        var form = Page.create("form", {
            $id: 'f1',
            title: 'aaa',
            $parentId: 'container',
            cols: 2,
            initData: false,
            dataSourcesIds: ['ds1'],

            groupWidgets: {
                "aaa":[
                    {$id: 'name', $xtype: 'input', label: '您的姓名', bind: 'ds1.xm', required: true},
                    {$id: 'interest', $xtype: 'input', label: '兴趣', rowNum: 3, floatDirection: "right", bind: 'ds1.xq'},
                    {$id: 'sex', $xtype: 'input', label: '性别', bind: 'ds1.xb'},
                    {$id: 'phone', $xtype: 'input', colNum: 1, label: '电话', bind: 'ds1.dh'},
                    {$id: 'name1', $xtype: 'input', label: '您的姓名1', rowNum: 1, colNum: 1,floatDirection: "right",bind: 'ds1.xm', required: true},
                    {$id: 'name2', $xtype: 'input', label: '您的姓名2', rowNum: 1, bind: 'ds1.xm', required: true},
                    {$id: 'name3', $xtype: 'input', label: '您的姓名3', bind: 'ds1.xm', required: true},
                    {$id: 'name4', $xtype: 'input', label: '您的姓名4', colNum: 1,bind: 'ds1.xm', required: true},
                    {$id: 'name5', $xtype: 'input', label: '您的姓名5', bind: 'ds1.xm', required: true},
                    {$id: 'name6', $xtype: 'textarea', label: '您的姓名6', rowNum: 2, colNum: 3,bind: 'ds1.xm', required: true},
                    {$id: 'grjj', $xtype: 'input', label: '个人简介', bind: "ds1.grjj", show: false},
                    {$id: 'xy', $xtype: 'combobox', url: "../form/combobox/Data.demo.json", label: '学院', bind: "ds1.xy", show: true, required: true }
                ],
                "bbb": [
                    {$id: 'name90', $xtype: 'input', label: '您的姓名', bind: 'ds1.xm', required: true}
                ]
            }
        });
        form.render();

        /*
        var form2 = Page.create("form", {
            $id: 'f',
            $parentId: 'container2',
            cols: 2,
            initData: true,
            dataSourcesIds: ['ds1'],
            widgets: [
                {$id: 'sex', $xtype: 'input', label: '性别', bind: 'ds1.xb'},
                {$id: 'phone', $xtype: 'input', label: '电话', bind: 'ds1.dh'},
                {$id: 'grjj', $xtype: 'input', label: '个人简介', bind: "ds1.grjj", show: false},
                {$id: 'xy', $xtype: 'combobox', url: "../form/combobox/Data.demo.json", label: '学院', bind: "ds1.xy"}
            ]
        });
        form2.render();
        */

        Page.manager.components["ds1"].addEvent("recordUpdated", function (v) {
            $("#valArea").html(JSON.stringify(v));
        });


        var ds1 = Page.manager.components["ds1"];
//        ds1.sync();
        $("#loadData").click(function () {
            Promise.all([ds1.fetch()]).then(function () {
                ds1.updateRecord(ds1.getValue());
            });
        });
        $("#submitData").click(function () {
            form.submitForm();
        });
    });
</script>
</body>
</html>